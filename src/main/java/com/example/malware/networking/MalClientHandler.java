package com.example.malware.networking;

import java.io.*;
import java.net.Socket;


public class MalClientHandler implements Runnable {

    private Socket socket;
    private BufferedReader inputReader;

    public MalClientHandler(Socket socket) throws IOException {

        this.socket = socket;


        try {

            inputReader = new BufferedReader(new InputStreamReader(socket.getInputStream()));
        } catch (IOException e) {
            throw new RuntimeException(e);
        }


    }


    public void run() {

        while (true) {
            try {
                    // TODO: Insert canvas altering methods + switch case to map input to said methods
                        System.out.print(inputReader.readLine());

            } catch (IOException ex) {
                System.err.println("Error handling client input: " + ex.getMessage());
            }
            if (!socket.isConnected()) {
                System.out.println("Connection lost");
                break;
            }

        }

        try {
            socket.close();
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }
}

