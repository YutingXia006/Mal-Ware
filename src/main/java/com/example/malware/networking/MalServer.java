package com.example.malware.networking;
import java.io.*;
import java.net.*;


public class MalServer implements Runnable{

    private String name = null;
    private String ip = null;
    private int port;

    private  DataInputStream dis;
    private DataOutputStream dos;

    private ServerSocket serverSocket;
    private Socket socket;
    public MalServer(String name, String ip, int port) {

        this.name = name;
        this.port = port;
        this.ip = ip;


    }



    public void initiateServer() throws IOException {

        serverSocket = new ServerSocket(port);

        Thread serverThread = new Thread(this);
        serverThread.start();

    }


    @Override
    public void run() {
        try {
            socket = serverSocket.accept();
            System.out.print("Connected");
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
        try {
            dis = new DataInputStream(socket.getInputStream());
            dos = new DataOutputStream(socket.getOutputStream());
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
        MalClientHandler malClientHandler = null;
        try {
            malClientHandler = new MalClientHandler(socket);
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
        Thread clientHandlerThread = new Thread(malClientHandler);
        clientHandlerThread.start();
    }


}
