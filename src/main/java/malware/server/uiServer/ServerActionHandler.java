package malware.server.uiServer;

import javafx.scene.control.Label;
import malware.server.Server;

import java.io.IOException;
import java.util.ArrayList;

public class ServerActionHandler {
    private final ArrayList<Thread> threads;

    public ServerActionHandler(ArrayList<Thread> threads) {
        this.threads = threads;
    }

    protected Server submitServerInfo(int port, Label errorLabel) {
        Server server;
        try {
            server = new Server(port);
            Thread serverThread = (new Thread(server));
            serverThread.setName("Server Thread");
            serverThread.setDaemon(true);
            serverThread.start();
            threads.add(serverThread);
        } catch(IllegalArgumentException | IOException e){
            errorLabel.setText("Invalid port number");
            server = null;
        }
        return server;
    }
}
