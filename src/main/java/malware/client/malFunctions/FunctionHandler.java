package malware.client.malFunctions;

import javafx.scene.canvas.GraphicsContext;
import javafx.scene.control.Button;
import javafx.scene.control.RadioButton;
import javafx.scene.control.ToggleGroup;

import java.util.ArrayList;

public class FunctionHandler {

    private ArrayList<RadioButton> functionButtons = new ArrayList<>();
    private ToggleGroup functionGroup = new ToggleGroup();
    private static ArrayList<SimpleFunctionsAbstract> functions = new ArrayList<>();
    private GraphicsContext gc;

    public FunctionHandler(GraphicsContext gc) {

        this.gc = gc;
        addDefaultDrawing();
        initFunctions();
        addButtons();
    }



    private void addDefaultDrawing(){
        RadioButton draw = new RadioButton("Draw");
        functionButtons.add(draw);
        draw.setSelected(true);
        draw.setToggleGroup(functionGroup);
    }

    private void initFunctions(){

        SquareFunction squareFunction = new SquareFunction();
        functions.add(squareFunction);
        BigSquareFunction bigSquareFunction = new BigSquareFunction();
        functions.add(bigSquareFunction);

    }

    public String getSelectedFunction(){
        RadioButton selectedRadioButton = (RadioButton) functionGroup.getSelectedToggle();
        return selectedRadioButton.getText();
    }

    public ArrayList<RadioButton> getFunctionButtons(){
        return functionButtons;
    }

    private void addButtons(){
        functions.stream().forEach(f->{
            functionButtons.add(createButton(f));

        });

    }

    private RadioButton createButton(SimpleFunctionsAbstract f){

        RadioButton button = new RadioButton(f.getDisplayName());
        button.setToggleGroup(functionGroup);

        return button;
    }

    public void takeOver(String instructionName, float x, float y) {

        functions.stream().forEach(f -> {

            if(f.getDisplayName().equals(instructionName)){
                f.executeFunction(x,y,gc);
            }

        });
    }


}
